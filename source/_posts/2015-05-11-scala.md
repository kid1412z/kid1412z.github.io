title: "Scala"
date: 2015-05-11 20:34:22
categories:
tags: [scala]
---
**摘要**：Scala语言要点
**Abstract**: Simple Scala

<!-- more -->

## 关键字
|||||
|:---:|:----:|:---:|:-----:|
|abstract	|case	|catch	|class|
|def	|do	|else	|extends|
|false	|final	|finally	|for|
|forSome	|if	|implicit|	import|
|lazy	|match	|new	|null|
|object	|override	|package	|private|
|protected	|return	|sealed	|super|
|this	|throw	|trait	|try|
|true	|type	|val	|var|
|while	|with	|yield	 ||
|-	|:|	=	|=>|
|<-	|<:	|<%	|>:|
|#	|@	|||	


## 数据类型

|dataType | Description|
|:---------:|:----------:|
|    Byte   |8 bit signed value. Range from -128 to 127|
|  Short |  16 bit signed value. Range -32768 to 32767 |
|  Int |   32 bit signed value. Range -2147483648 to 2147483647|
|  Long |   64 bit signed value. -9223372036854775808 to 9223372036854775807|
|  Float |  32 bit IEEE 754 single-precision float |
|  Double | 64 bit IEEE 754 double-precision float  |
|  Char |  16 bit unsigned Unicode character. Range from U+0000 to U+FFFF |
|  String | A sequence of Chars  |
|  Boolean | Either the literal true or the literal false  |
|  Unit |  Corresponds to no value |
|  Null |  null or empty reference |
|  Nothing | The subtype of every other type; includes no values  |
|  Any |  The supertype of any type; any object is of type *Any* |
|  AnyRef | The supertype of any reference type  |


## 声明变量和值

    val value = 7 //声明值（常量，无法改变）
    var variable = 7 //声明变量
    
## 赋值语句

赋值语句没有值

    y = 1 // 值是()
    x = y = 1 //  x = () ; y = 1

## 控制结构

### 条件表达式

条件表达式也有值，if/else没有覆盖到的返回*无用值*(Unit类，等同于void，用*()*表示)

    val s = if (x > 0) 1 else -1 //所有值都有定义
    if (x > 0) 1  //else缺失等同于  if (x > 0) 1 else ()
    
### 块表达式

包含在{}之间的语句集合为块表达式，块表达式也有值，取最后一个语句的值。

    val distance = {val dx = x - x0; val dy = y - y0; sqrt(dx * dx + dy * dy}
    
### 循环

    for(i <- 表达式) //遍历右边表达式所有值
    for(i <- 1 to n)  // i = 1,2...n
    for(i <- 1 until n) // i = 1,2...n-1
    

scala 没有提供 break 和 continue，可以通过以下方式：

    import scala.util.control.Breaks._
    breakable {
        for (...) {
            if (...) break;
            ...
        }
    }
    
但以上方式使用异常抛出和捕获的形式实现，效率较低。

## 函数(Functions)

### 函数定义

    def functionName ([list of parameters]) : [return type] = {
       function body
       return [expr]
    }

参数列表（List of parameters）和返回值类型（return type）是可选的。例如：

    def addInt( a:Int, b:Int ) : Int = {
      var sum:Int = 0
      sum = a + b

      return sum
    }
    def printMe( ) : Unit = {
        println("Hello, Scala!")
    }  

### 函数调用

    [instance.]functionName( list of parameters )
    
#### 换名调用（Functions Call-by-Name）

一般情况下，调用一个函数的时候，需要传入确定的参数；scala可以把函数作为参数，使得参数的值可以在运行时确定。
scala允许在函数声明和调用该函数参数的地方省略(), 但保留=>

    object Test {
       def main(args: Array[String]) {
            delayed(time());
       }
    
       def time() = {
          println("Getting time in nano seconds")
          System.nanoTime
       }
       //换名调用
       def delayed( t: => Long ) = {
          println("In delayed method")
          println("Param: " + t)
          t
       }
       //普通调用
       def delayed( t():=>Long ) = {
           ...
           t()
       }
    }

#### 有名实参（Functions with Named Arguments）

    object Test {
       def main(args: Array[String]) {
            printInt(b=5, a=7); 
       }
       def printInt( a:Int, b:Int ) = {
          println("Value of a : " + a );
          println("Value of b : " + b );
       }
    }

命名实参的方式允许不按照顺序传入参数。

#### 可变参数（Function with Variable Arguments）

    object Test {
       def main(args: Array[String]) {
            printStrings("Hello", "Scala", "Python");
       }
       def printStrings( args:String* ) = {
          var i : Int = 0;
          for( arg <- args ){
             println("Arg value[" + i + "] = " + arg );
             i = i + 1;
          }
       }
    }
    
#### 递归函数（Recursion Functions）

    object Test {
       def main(args: Array[String]) {
          for (i <- 1 to 10)
             println( "Factorial of " + i + ": = " + factorial(i) )
       }
       
       def factorial(n: BigInt): BigInt = {  
          if (n <= 1)
             1  
          else    
          n * factorial(n - 1)
       }
    }

#### 默认参数（Default Parameter Values）

    object Test {
       def main(args: Array[String]) {
            println( "Returned Value : " + addInt() );
       }
       def addInt( a:Int=5, b:Int=7 ) : Int = {
          var sum:Int = 0
          sum = a + b
    
          return sum
       }
    }


#### 高阶函数（Higher-Order Functions）


